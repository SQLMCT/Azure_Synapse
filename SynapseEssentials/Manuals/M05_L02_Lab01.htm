<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:"Segoe UI Semibold";
	panose-1:2 11 7 2 4 2 4 2 2 3;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Cambria",serif;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Cambria",serif;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Cambria",serif;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-name:"List Paragraph\,Bullet List\,FooterText\,Procedure StepCxSpLast\,Procedure Step";
	mso-style-link:"List Paragraph Char\,Bullet List Char\,FooterText Char\,Procedure StepCxSpLast Char\,Procedure Step Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Cambria",serif;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	font-size:14.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#365F91;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Segoe UI",sans-serif;
	color:black;
	font-weight:bold;}
span.ListParagraphChar
	{mso-style-name:"List Paragraph Char\,Bullet List Char\,FooterText Char\,Procedure StepCxSpLast Char\,Procedure Step Char";
	mso-style-link:"List Paragraph\,Bullet List\,FooterText\,Procedure StepCxSpLast\,Procedure Step";
	font-family:"Cambria",serif;}
span.TaskHeadingChar
	{mso-style-name:"Task Heading Char";
	mso-style-link:"Task Heading";
	font-family:"Segoe UI",sans-serif;
	font-weight:bold;}
p.TaskHeading, li.TaskHeading, div.TaskHeading
	{mso-style-name:"Task Heading";
	mso-style-link:"Task Heading Char";
	margin-top:0in;
	margin-right:.1in;
	margin-bottom:3.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Segoe UI",sans-serif;
	font-weight:bold;}
span.TaskNameChar
	{mso-style-name:"Task Name Char";
	mso-style-link:"Task Name";
	font-family:"Cambria",serif;
	color:black;
	font-weight:bold;}
p.TaskName, li.TaskName, div.TaskName
	{mso-style-name:"Task Name";
	mso-style-link:"Task Name Char";
	margin-top:0in;
	margin-right:.1in;
	margin-bottom:6.0pt;
	margin-left:.75in;
	text-indent:-.25in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Cambria",serif;
	color:black;
	font-weight:bold;}
span.TaskDetailChar
	{mso-style-name:"Task Detail Char";
	mso-style-link:"Task Detail";
	font-family:"Cambria",serif;
	color:black;
	font-weight:normal;}
p.TaskDetail, li.TaskDetail, div.TaskDetail
	{mso-style-name:"Task Detail";
	mso-style-link:"Task Detail Char";
	margin-top:0in;
	margin-right:.1in;
	margin-bottom:6.0pt;
	margin-left:67.5pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Cambria",serif;
	color:black;}
span.ExerciseScenerioChar
	{mso-style-name:"Exercise Scenerio Char";
	mso-style-link:"Exercise Scenerio";
	font-family:"Cambria",serif;}
p.ExerciseScenerio, li.ExerciseScenerio, div.ExerciseScenerio
	{mso-style-name:"Exercise Scenerio";
	mso-style-link:"Exercise Scenerio Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Cambria",serif;}
span.CompletionMessageChar
	{mso-style-name:"Completion Message Char";
	mso-style-link:"Completion Message";
	font-family:"Cambria",serif;
	font-style:italic;}
p.CompletionMessage, li.CompletionMessage, div.CompletionMessage
	{mso-style-name:"Completion Message";
	mso-style-link:"Completion Message Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Cambria",serif;
	font-style:italic;}
span.IdeaChar
	{mso-style-name:"Idea Char";
	mso-style-link:Idea;
	font-family:"Segoe UI",sans-serif;
	background:#DBE5F1;}
p.Idea, li.Idea, div.Idea
	{mso-style-name:Idea;
	mso-style-link:"Idea Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:1.0in;
	line-height:115%;
	background:#DBE5F1;
	font-size:11.0pt;
	font-family:"Segoe UI",sans-serif;}
span.TemplateVersionChar
	{mso-style-name:"Template Version Char";
	mso-style-link:"Template Version";
	font-family:"Cambria",serif;
	color:#BFBFBF;}
p.TemplateVersion, li.TemplateVersion, div.TemplateVersion
	{mso-style-name:"Template Version";
	mso-style-link:"Template Version Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Cambria",serif;
	color:#BFBFBF;}
.MsoChpDefault
	{font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;
	border:double windowtext 5.25pt;
	padding:24.0pt 24.0pt 24.0pt 24.0pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal align=center style='text-align:center'><img width=624
height=226 id="Picture 9" src="M05_L02_Lab01_files/image001.png"><b><sup><span
style='font-size:26.0pt;line-height:115%;color:black'>Monitoring query
execution through DMVs and Query Store</span></sup></b></p>

<p class=TemplateVersion><a name="OLE_LINK1"></a><a name="OLE_LINK4"></a><a
name="OLE_LINK3"></a><a name="OLE_LINK2"></a>Template Version: 2.0</p>

<p class=MsoNormal><b>Introduction</b></p>

<p class=MsoNormal>This lab introduces students to the various Transact-SQL
functionality available to monitor Synapse SQL.</p>

<p class=MsoNormal><b>Estimated Time</b></p>

<p class=MsoNormal>30 minutes</p>

<p class=MsoNormal><b>Objectives</b></p>

<p class=MsoNormal>At the end of this lab, you will be able to:</p>

<p class=MsoListParagraph style='margin-left:37.2pt;text-indent:-19.2pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Explore DMVs to retrieve detailed information about Distributed
Plan Steps and SQL Server Distributions.</p>

<p class=MsoListParagraph style='margin-left:37.2pt;text-indent:-19.2pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Use DMVs to identify the resources responsible for queries being
in a waiting state.</p>

<p class=MsoNormal><b>Prerequisites</b></p>

<p class=MsoListParagraph style='margin-left:37.2pt;text-indent:-19.2pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>An Azure subscription. See Get Azure free trial.</p>

<p class=MsoListParagraph style='margin-left:37.2pt;text-indent:-19.2pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Supported operating system to perform this class: Windows 10 /
Windows Server 2016</p>

<p class=MsoListParagraph style='margin-left:37.2pt;text-indent:-19.2pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Download and install Visual Studio with option “Data Storage and
processing”</p>

<p class=MsoListParagraph style='margin-left:37.2pt;text-indent:-19.2pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Your Azure Synapse SQL Database should be scaled to DW100c</p>

<p class=MsoListParagraph style='margin-left:37.2pt;text-indent:-19.2pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Completed Module 2 labs</p>

<p class=MsoListParagraph style='margin-left:37.2pt'>&nbsp;</p>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal><b>Logon Information</b></p>

<p class=MsoNormal>Use the following credentials to login into virtual environment</p>

<p class=MsoListParagraph style='margin-left:37.2pt;text-indent:-19.2pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Username: Administrator</p>

<p class=MsoListParagraph style='margin-left:37.2pt;text-indent:-19.2pt'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Password:&nbsp; Pa$$w0rd</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#D9E2F3;margin-left:.25in;margin-right:0in'>

<p class=MsoListParagraph style='margin-left:0in;background:#D9E2F3;border:
none;padding:0in'><b><span style='color:black'>Note:</span></b><span
style='color:black'> The labs can be performed using your laptop environment
rather than using LOD environment.</span></p>

</div>

<p class=MsoNormal>&nbsp;</p>

<span style='font-size:11.0pt;line-height:115%;font-family:"Cambria",serif'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoTocHeading>Table of Contents</p>

<p class=MsoToc2><a href="#_Toc46542596">Lab: Azure Synapse SQL – Monitoring
with Dynamic Management Views<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></p>

<p class=MsoToc3><a href="#_Toc46542597">Exercise 1: Explore requests / queries
run against your Azure Synapse SQL<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></p>

<p class=MsoToc3><a href="#_Toc46542598">Exercise 2: Identify Waiting Requests
in your Synapse SQL<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></p>

<p class=MsoToc3><a href="#_Toc46542599">Exercise 3: Using Query Store to
identify your most resource intensive queries<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>12</span></a></p>

<p class=MsoNormal>&nbsp;</p>

<div style='border:none;border-bottom:solid #333399 1.0pt;padding:0in 0in 1.0pt 0in;
margin-right:.1in'>

<p class=MsoNormal>&nbsp;<br clear=all style='page-break-before:always'>
<a name="_Toc506830693"></a><a name="_Toc46542596"><span style='font-size:20.0pt;
line-height:115%;color:#00B0F0'>Lab: Azure Synapse SQL – Monitoring with
Dynamic Management Views</span></a><span style='font-size:20.0pt;line-height:
115%;color:#00B0F0'>&nbsp;</span></p>

</div>

<p class=MsoNormal>You will start the lab by connecting to your Synapse SQL
database.&nbsp; The lab walks through the ways to use SQL Dynamic Management
Views (DMV) to monitor queries.&nbsp; To get started, you’ll connect and query
using SQL Server Management Studio.&nbsp;</p>

<h3><a name="_Toc506830695"></a><a name="_Toc46542597">Exercise 1: Explore
requests / queries run against your Azure Synapse SQL</a></h3>

<p class=ExerciseScenerio>In this exercise, you will explore requests and <a
name="_Hlk506719633">queries which are either currently active or have been
recently active in your Azure Synapse SQL</a>. </p>

<p class=TaskHeading>Tasks</p>

<p class=TaskName style='margin-left:55.8pt;text-indent:-19.8pt'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Connect to your Synapse SQL with SQL Server Management Studio as
DWLoader user.</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Connect
to your Synapse SQL database created earlier.</span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Use
following properties while making connection to master database: </span></p>

<p class=TaskName style='margin-left:1.25in'><span style='font-family:Symbol;
font-weight:normal'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-weight:normal'>Server Name: </span>Workspace
where SQL pool is deployed to</p>

<p class=TaskName style='margin-left:1.25in'><span style='font-family:Symbol;
font-weight:normal'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-weight:normal'>Authentication: </span>SQL
Server Authentication</p>

<p class=TaskName style='margin-left:1.25in'><span style='font-family:Symbol;
font-weight:normal'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-weight:normal'>Username: </span>DWLoader</p>

<p class=TaskName style='margin-left:1.0in'><img width=480 height=295
id="Picture 1949305751" src="M05_L02_Lab01_files/image002.png"></p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#DEEAF6;margin-left:.75in;margin-right:.1in'>

<p class=TaskName style='margin-top:0in;margin-right:0in;margin-bottom:6.0pt;
margin-left:0in;text-indent:0in;background:#DEEAF6;border:none;padding:0in'>Note:
<span style='font-weight:normal'>Please refer to M01_L05 in case you forgot the
password for DWLoader login that you created.</span></p>

</div>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Upon
connected to Synapse SQL instance in </span>SQL Server Management Studio<span
style='font-weight:normal'>, click </span>New Query<span style='font-weight:
normal'> (your SQL pool name might be different)</span></p>

<p class=TaskName style='text-indent:0in'><img width=319 height=69
id="Picture 823786889" src="M05_L02_Lab01_files/image003.png"></p>

<p class=TaskName style='margin-left:55.8pt;text-indent:-19.8pt'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Create and Populate Lab tables</p>

<p class=TaskName style='margin-left:55.8pt;text-indent:0in'><span
style='font-weight:normal'>Execute the following script to create the necessary
tables and data which will be used in this lesson. It should take approximately
2 minutes to complete. </span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><a name="_Hlk22821347"><span style='font-size:10.0pt;font-family:Consolas;
  color:blue'>IF</span></a><span style='font-size:10.0pt;font-family:Consolas;
  color:black'> </span><span style='font-size:10.0pt;font-family:Consolas;
  color:fuchsia'>OBJECT_ID</span><span style='font-size:10.0pt;font-family:
  Consolas;color:gray'>(</span><span style='font-size:10.0pt;font-family:Consolas;
  color:red'>'DimTaxiZones_Monitoring'</span><span style='font-size:10.0pt;
  font-family:Consolas;color:gray'>)</span><span style='font-size:10.0pt;
  font-family:Consolas;color:black'> </span><span style='font-size:10.0pt;
  font-family:Consolas;color:gray'>is</span><span style='font-size:10.0pt;
  font-family:Consolas;color:black'> </span><span style='font-size:10.0pt;
  font-family:Consolas;color:gray'>not</span><span style='font-size:10.0pt;
  font-family:Consolas;color:black'> </span><span style='font-size:10.0pt;
  font-family:Consolas;color:gray'>null</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>            
  </span><span style='font-size:10.0pt;font-family:Consolas;color:blue'>DROP</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>TABLE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>
  DimTaxiZones_Monitoring</span><span style='font-size:10.0pt;font-family:Consolas;
  color:gray'>;</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>GO</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>           </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>CREATE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>TABLE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> NYCTaxi</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>DimTaxiZones_Monitoring</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>WITH</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>       </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>DISTRIBUTION</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>=</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:fuchsia'>REPLICATE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>,</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>       </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>CLUSTERED</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>INDEX</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>       </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>            
  [LocationID] </span><span style='font-size:10.0pt;font-family:Consolas;
  color:blue'>ASC</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>       </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>AS</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>SELECT</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>            
  </span><span style='font-size:10.0pt;font-family:Consolas;color:gray'>*</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>FROM</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [NYCTaxi]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[TaxiZones]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>GO</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>IF</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:fuchsia'>OBJECT_ID</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:red'>'FactTrips_Monitoring'</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>is</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>not</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>null</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>            
  </span><span style='font-size:10.0pt;font-family:Consolas;color:blue'>DROP</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>TABLE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>
  FactTrips_Monitoring</span><span style='font-size:10.0pt;font-family:Consolas;
  color:gray'>;</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>GO</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>           </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>CREATE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>TABLE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> NYCTaxi</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>FactTrips_Monitoring</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>WITH</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>       </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>DISTRIBUTION</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>=</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>HASH </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [PULocationID] </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>),</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>       </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>CLUSTERED</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>COLUMNSTORE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>INDEX</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>AS</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>SELECT</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>*</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>FROM</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [NYCTaxi]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[TripsUncompressed]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>GO</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>IF</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:fuchsia'>OBJECT_ID</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:red'>'DimDate_Monitoring'</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>is</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>not</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>null</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>DROP</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>TABLE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> DimDate_Monitoring</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>;</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>GO</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>     </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>CREATE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>TABLE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [NYCTaxi]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[DimDate_Monitoring]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>WITH</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>       </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>DISTRIBUTION</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>=</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:fuchsia'>REPLICATE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>,</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>       </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>CLUSTERED</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>INDEX</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[DateKey] </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>ASC</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>AS</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>SELECT</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>*</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>FROM</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [NYCTaxi]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[Date]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>GO</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>CREATE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>NONCLUSTERED</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>INDEX</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [Zone_IDX] </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>ON</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [NYCTaxi]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[DimTaxiZones_Monitoring]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:black'>      
  [Zone] </span><span style='font-size:10.0pt;font-family:Consolas;color:blue'>ASC</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>WITH </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>DROP_EXISTING</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>=</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>OFF</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>GO</span></p>
  </td>
 </tr>
</table>

<p class=TaskName style='margin-left:55.8pt;text-indent:0in'>&nbsp;</p>

<p class=TaskName style='margin-left:55.8pt;text-indent:-19.8pt'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Run the following query:</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>SELECT</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [Zone]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>,</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:fuchsia'>COUNT</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[tpep_pickup_datetime]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>FROM </span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[NYCTaxi]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[FactTrips_Monitoring]
  </span><span style='font-size:10.0pt;font-family:Consolas;color:blue'>AS</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> FTrips</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:gray'>INNER</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>JOIN</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [NYCTaxi]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[DimTaxiZones_Monitoring]
  </span><span style='font-size:10.0pt;font-family:Consolas;color:blue'>AS</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> DZone</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>ON</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> DZone</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>LocationID</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>=</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>FTrips</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>PULocationID</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>GROUP</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>BY</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>Zone</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>OPTION </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>LABEL </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>=</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:red'>'Module5_Query1'</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span></p>
  </td>
 </tr>
</table>

<p class=TaskName style='margin-left:55.8pt;text-indent:0in'>&nbsp;</p>

<p class=TaskName style='margin-left:55.8pt;text-indent:-19.8pt'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Retrieve information about all requests currently or recently active in Synapse
SQL</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Execute
the following statement to query the </span>sys.dm_pdw_exec_requests<span
style='font-weight:normal'> DMV.</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>SELECT </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:#7F7F7F'>*</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>FROM </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:#00B050'>sys</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>.dm_pdw_exec_requests
  </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>ORDER BY</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>
  submit_time </span><span lang=EN-AU style='font-size:10.0pt;font-family:Consolas;
  color:blue'>DESC</span><span lang=EN-AU style='font-size:10.0pt;font-family:
  Consolas;color:#7F7F7F'>;</span></p>
  </td>
 </tr>
</table>

<p class=TaskName style='margin-left:0in;text-indent:0in'>&nbsp;</p>

<p class=TaskName>3.<span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Review the data
returned by sys.dm_pdw_exec_requests</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>In
the Query Details window, review the data returned by </span>sys.dm_pdw_exec_requests<span
style='font-weight:normal'>. </span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>The
data returned by this DMV is the same as the data exposed on the Query\ Query
Details blades in the Azure Portal</span></p>

<p class=TaskName style='text-indent:0in'><img width=540 height=136
id="Picture 22" src="M05_L02_Lab01_files/image004.png"></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Take
note of the request_id value associated to the query you executed in exercise
1, we will use this request_id in the next few steps of this exercise. Use the
label column to simplify identification of your previously executed query
(label = “Module5_Query1”)</span></p>

<p class=TaskName>4.<span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Find the
distributed query plan steps for a specific query. </p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Execute
the following statement to query the sys.dm_pdw_request_steps DMV. </span></p>

<div style='border:solid black 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:56.7pt'>

<p class=Idea style='margin-left:15.3pt;text-indent:-15.3pt'><span
style='color:black'>Note: Remember to replace the request_id value in the WHERE
clause with the value that you noted down in the previous step.</span></p>

</div>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>SELECT </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:#7F7F7F'>*</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>FROM </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:#00B050'>sys</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>.
  dm_pdw_request_steps </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>WHERE </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>request_id
  </span><span lang=EN-AU style='font-size:10.0pt;font-family:Consolas;
  color:#7F7F7F'>= </span><span lang=EN-AU style='font-size:10.0pt;font-family:
  Consolas;color:red'>'QID65544'</span><span lang=EN-AU style='font-size:10.0pt;
  font-family:Consolas;color:black'> </span><span lang=EN-AU style='font-size:
  10.0pt;font-family:Consolas;color:#00B050'>--Place your request_id here</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>ORDER BY</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>
  step_index</span><span lang=EN-AU style='font-size:10.0pt;font-family:Consolas;
  color:#7F7F7F'>;</span></p>
  </td>
 </tr>
</table>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>&nbsp;</span></p>

<p class=TaskName>5.<span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Review the data
return from sys.dm_pdw_request_steps</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>In
the Query Details window, review the data returned by sys.dm_pdw_exec_requests.
</span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>This
DMV holds information about all steps that compose a given request or query in Synapse
SQL. It lists one row per query step. <a name="_Hlk506823772">This DMV will
allow you to identify which steps in your D-SQL plan are taking the longest to
complete, this is useful when troubleshooting a long running query.</a></span></p>

<p class=TaskDetail style='margin-left:.75in'><img width=527 height=108
id="Picture 23" src="M05_L02_Lab01_files/image005.png"></p>

<p class=TaskDetail style='margin-left:.75in'>Take note of the <b>step_index</b>
values for the <b>ShuffleMoveOperation</b> and the <b>ReturnOperation</b>, you
will use these values in the next steps of this exercise. </p>

<p class=TaskName>6.<span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Find the
distribution run times for a SQL step </p>

<p class=TaskName style='text-indent:0in'>&nbsp;<span style='font-weight:normal'>Execute
the following statement to query the </span><a name="_Hlk506824831">sys.dm_pdw_sql_requests</a><span
style='font-weight:normal'> DMV. </span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>SELECT </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:#7F7F7F'>*</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>FROM </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:#00B050'>sys</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>.dm_pdw_sql_requests
  </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>WHERE </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>request_id
  </span><span lang=EN-AU style='font-size:10.0pt;font-family:Consolas;
  color:#7F7F7F'>= </span><span lang=EN-AU style='font-size:10.0pt;font-family:
  Consolas;color:red'>'</span><span lang=EN-AU style='color:black'> </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:red'>QID65544'</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:#00B050'>--Place
  your request_id here</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:gray'>AND </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>step_index
  </span><span lang=EN-AU style='font-size:10.0pt;font-family:Consolas;
  color:#7F7F7F'>= </span><span lang=EN-AU style='font-size:10.0pt;font-family:
  Consolas;color:red'>'5'</span><span lang=EN-AU style='font-size:10.0pt;
  font-family:Consolas;color:#7F7F7F'>;</span><span lang=EN-AU
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:#00B050'>--Place
  your step_index here</span></p>
  </td>
 </tr>
</table>

<p class=TaskDetail style='margin-left:.75in'>&nbsp;</p>

<div style='border:solid black 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:56.7pt'>

<p class=Idea style='margin-left:15.3pt;text-indent:-15.3pt'><span
style='color:black'>Note: Remember to replace the request_id value in the WHERE
clause with the value that you noted down in Step 3. Replace the step_index
value with the value you noted down in Step 5 for the ReturnOperation.</span></p>

</div>

<p class=TaskName>7.<span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Review the data
return from sys.dm_pdw_sql_requests</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>In
the Query Details window, review the data returned by </span>sys.dm_pdw_sql_requests<span
style='font-weight:normal'>. </span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>This
DMV holds information about all the SQL Server query distributions forming part
of a SQL step in the query. These are operations which are occurring on the
Compute Nodes.</span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>This
DMV will assist in identifying why a step is taking longer on a specific
Compute Node\ Distribution. </span>DBCC PDW_SHOWEXECUTIONPLAN<span
style='font-weight:normal'> could then be used to retrieve the SQL Server
execution plan for it.</span></p>

<p class=TaskDetail style='margin-left:.75in'><img width=527 height=159
id="Picture 24" src="M05_L02_Lab01_files/image006.jpg"></p>

<p class=TaskName>8.<span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Find the
distributed query plan steps for a specific query </p>

<p class=TaskName style='text-indent:0in'>&nbsp;<span style='font-weight:normal'>Execute
the following statement to query the sys.dm_pdw_dms_workers DMV. </span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>SELECT </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:#7F7F7F'>*</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>FROM </span><a
  name="_Hlk506825709"><span lang=EN-AU style='font-size:10.0pt;font-family:
  Consolas;color:#00B050'>sys</span></a><span lang=EN-AU style='font-size:10.0pt;
  font-family:Consolas;color:black'>.dm_pdw_dms_workers </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>WHERE </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>request_id
  </span><span lang=EN-AU style='font-size:10.0pt;font-family:Consolas;
  color:#7F7F7F'>= </span><span lang=EN-AU style='font-size:10.0pt;font-family:
  Consolas;color:red'>'QID65544'</span><span lang=EN-AU style='font-size:10.0pt;
  font-family:Consolas;color:black'> </span><span lang=EN-AU style='font-size:
  10.0pt;font-family:Consolas;color:#00B050'>--Place your request_id here</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:gray'>AND </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>step_index
  </span><span lang=EN-AU style='font-size:10.0pt;font-family:Consolas;
  color:#7F7F7F'>= </span><span lang=EN-AU style='font-size:10.0pt;font-family:
  Consolas;color:red'>'5'</span><span lang=EN-AU style='font-size:10.0pt;
  font-family:Consolas;color:#7F7F7F'>;</span><span lang=EN-AU
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:#00B050'>--Place
  your step_index here</span></p>
  </td>
 </tr>
</table>

<p class=TaskDetail style='margin-left:.75in'>&nbsp;</p>

<div style='border:solid black 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:56.7pt'>

<p class=Idea style='margin-left:15.3pt;text-indent:-15.3pt'><span
style='color:black'>Note: Remember to replace the request_id value in the WHERE
clause with the value that you noted down in Step 3. Replace the step_index
value with the value you noted down in Step 5 for the ShuffleMoveOperation.</span></p>

</div>

<p class=TaskName>9.<span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Review the data
return from sys.dm_pdw_dms_workers</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>In
the Query Details window, review the data returned by sys.dm_pdw_dms_workers. </span></p>

<p class=TaskDetail style='margin-left:.75in'>This DMV holds information about
all workers completing DMS steps in Synapse SQL. </p>

<p class=TaskDetail style='margin-left:.75in'>This DMV is useful when
troubleshooting a specific distributed plan step which is taking a long time to
complete. The total_elapsed_time and rows_processed columns can be used to
identify which distributions are taking the longest to complete. When drastic
deviations are observed this is often an indication of table skew.</p>

<p class=TaskDetail style='margin-left:.75in'><img width=541 height=281
id="Picture 25" src="M05_L02_Lab01_files/image007.png"></p>

<p class=CompletionMessage>Exercise 1 has been completed.</p>

<p class=CompletionMessage>&nbsp;</p>

<p class=CompletionMessage>&nbsp;</p>

<span style='font-size:11.0pt;line-height:115%;font-family:"Cambria",serif'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal><i><span style='font-size:12.0pt;line-height:115%'>&nbsp;</span></i></p>

<h3><a name="_Toc506830696"></a><a name="_Toc46542598">Exercise 2: Identify
Waiting Requests in your Synapse SQL</a></h3>

<p class=ExerciseScenerio>In this exercise, you will use DMV’s to identify why
queries are in a suspended state.</p>

<p class=TaskHeading>Tasks</p>

<p class=TaskName style='margin-left:55.8pt;text-indent:-19.8pt'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Connect to your Synapse SQL with SQL Server Management Studio as
DWLoader user.</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Connect
to your Synapse SQL database created earlier.</span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Use
following properties while making connection to master database: </span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
SQL Server: </span>SQL server where the Data Warehouse is deployed to</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Authentication: </span>SQL Server Authentication</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Username: </span>DWLoader</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Upon
connected to Synapse SQL instance in </span>SQL Server Management Studio<span
style='font-weight:normal'>, click </span>New Query<span style='font-weight:
normal'>.</span></p>

<p class=TaskName style='text-indent:0in'><img width=421 height=75
id="Picture 26" src="M05_L02_Lab01_files/image008.png"></p>

<p class=TaskName><span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp; </span></p>

<p class=TaskName style='margin-left:55.8pt;text-indent:-19.8pt'><span
style='color:black'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Create an exclusive update lock on the <span style='font-size:
10.0pt;line-height:115%;font-family:"Calibri",sans-serif;color:black'>FactTrips_Monitoring</span>
table.</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Execute
the following statement to create an exclusive update lock on the </span><span
style='font-size:10.0pt;line-height:115%;font-family:"Calibri",sans-serif;
color:black'>FactTrips_Monitoring</span><span style='font-size:10.0pt;
line-height:115%;font-family:Consolas;color:black'> </span><span
style='font-weight:normal'>table.</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>BEGIN</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>TRAN</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:fuchsia'>UPDATE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [NYCTaxi]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[FactTrips_Monitoring]
  </span><span style='font-size:10.0pt;font-family:Consolas;color:blue'>SET</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>
  [store_and_fwd_flag]</span><span style='font-size:10.0pt;font-family:Consolas;
  color:gray'>=</span><span style='font-size:10.0pt;font-family:Consolas;
  color:black'>[store_and_fwd_flag]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>WHERE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [PULocationID] </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>IN</span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>265</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>OPTION </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>LABEL </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>=</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:red'>'Blocking_Query1'</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  style='font-size:10.0pt;font-family:Consolas;color:green'>--ROLLBACK TRAN</span></p>
  </td>
 </tr>
</table>

<p class=CompletionMessage><span style='color:white'>&nbsp;</span></p>

<p class=TaskName style='margin-left:55.8pt;text-indent:-19.8pt'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Execute a second update against the DimProduct_Monitoring table to
simulate a blocking scenario.</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Open
a </span>New Query<span style='font-weight:normal'> window and execute the
following query against your Synapse SQL instance.</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:fuchsia'>UPDATE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [NYCTaxi]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[FactTrips_Monitoring]
  </span><span style='font-size:10.0pt;font-family:Consolas;color:blue'>SET</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>
  [store_and_fwd_flag]</span><span style='font-size:10.0pt;font-family:Consolas;
  color:gray'>=</span><span style='font-size:10.0pt;font-family:Consolas;
  color:black'>[store_and_fwd_flag]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>WHERE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [PULocationID] </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>IN</span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>265</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:blue'>OPTION </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>LABEL </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:gray'>=</span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:red'>'Blocked
  Query'</span><span lang=EN-AU style='font-size:10.0pt;font-family:Consolas;
  color:gray'>)</span></p>
  </td>
 </tr>
</table>

<p class=CompletionMessage><span style='color:white'>&nbsp;</span></p>

<p class=CompletionMessage>&nbsp;</p>

<p class=TaskName>4.<span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Use the Synapse
SQL DMVs to identify the blocking issue.</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Open
a </span>New Query<span style='font-weight:normal'> window and execute the
following query against your Synapse SQL pool.</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas'>SELECT </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>waits.session_id,</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>waits.request_id,</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>requests.[label],</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>requests.command,</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>requests.status,</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>requests.start_time,</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>waits.type,</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>waits.state,</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>waits.object_type,</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>waits.object_name
  </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>FROM
  sys.dm_pdw_waits waits </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;
  JOIN sys.dm_pdw_exec_requests requests </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;
  ON waits.request_id=requests.request_id </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-size:10.0pt;font-family:Consolas;color:black'>ORDER BY
  waits.object_name, waits.object_type, waits.state;</span></p>
  </td>
 </tr>
</table>

<p class=CompletionMessage><span style='color:white'>&nbsp;</span></p>

<div style='border:solid black 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
margin-left:.75in'>

<p class=Idea style='margin-left:0in'><span style='color:black'>If you discover
that any of your queries are not making progress because they are waiting for a
resource, the query above can be used to determine what they are waiting for. </span></p>

<p class=Idea style='margin-left:0in'><span style='color:black'>While this
exercise focuses on blocking the same query could be used to troubleshoot
concurrency slot issues.</span></p>

</div>

<p class=TaskName>5.<span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Review the
information returned by the DMVs.</p>

<p class=CompletionMessage style='margin-left:.75in'><span style='font-size:
11.0pt;line-height:115%;color:black;font-style:normal'>If the query is actively
waiting on resources from another query, then the state will be
AcquireResources\ Queued. If the query has all the required resources, then the
state will be Granted. </span></p>

<p class=CompletionMessage style='margin-left:.75in'><img width=555 height=70
id="Picture 28" src="M05_L02_Lab01_files/image009.png"></p>

<p class=TaskName>6.<span style='font-size:7.0pt;line-height:115%;font-family:
"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Rollback the
initial Update statement.</p>

<p class=CompletionMessage style='margin-left:.75in'><span style='font-size:
11.0pt;line-height:115%;color:black;font-style:normal'>Return to the first
query window opened in this exercise, uncomment the <b>ROLLBACK</b> <b>TRAN</b>
line (by removing the --). Once uncommented, highlight the <b>ROLLBACK</b> <b>TRAN</b>
line and execute it to rollback the transaction.</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr style='height:31.4pt'>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in;height:31.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>BEGIN</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>TRAN</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:fuchsia'>UPDATE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [NYCTaxi]</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>.</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>[FactTrips_Monitoring]
  </span><span style='font-size:10.0pt;font-family:Consolas;color:blue'>SET</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>
  [store_and_fwd_flag]</span><span style='font-size:10.0pt;font-family:Consolas;
  color:gray'>=</span><span style='font-size:10.0pt;font-family:Consolas;
  color:black'>[store_and_fwd_flag]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span style='font-size:10.0pt;font-family:Consolas;color:blue'>WHERE</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> [PULocationID] </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>IN</span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>265</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:blue'>OPTION </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>(</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'>LABEL </span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>=</span><span
  style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
  style='font-size:10.0pt;font-family:Consolas;color:red'>'Blocking_Query1'</span><span
  style='font-size:10.0pt;font-family:Consolas;color:gray'>)</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  style='font-size:10.0pt;font-family:Consolas;color:green'>--ROLLBACK TRAN</span></p>
  </td>
 </tr>
</table>

<p class=CompletionMessage style='margin-left:.75in'><span style='font-size:
11.0pt;line-height:115%;color:black;font-style:normal'>&nbsp;</span></p>

<p class=CompletionMessage style='margin-left:.75in'><span style='font-size:
11.0pt;line-height:115%;color:black;font-style:normal'>Return to your second
query window where you executed the second UPDATE statement. Notice that the update
has now completed in the second query executed. </span></p>

<p class=CompletionMessage>Exercise 2 has been completed.</p>

<span style='font-size:11.0pt;line-height:115%;font-family:"Cambria",serif'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal><i><span style='font-size:12.0pt;line-height:115%'>&nbsp;</span></i></p>

<h3><a name="_Toc37684810"></a><a name="_Toc46542599">Exercise 3: Using Query
Store to identify your most resource intensive queries</a></h3>

<p class=ExerciseScenerio>In this exercise, you will use Query Store to gain
more insights about the queries running against your database.</p>

<p class=TaskHeading>Tasks</p>

<p class=TaskName>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Launch SQL Server Management Studio and connect to Synapse SQL instance
as SQLAdmin user</p>

<p class=TaskDetail style='margin-left:55.8pt'>Create a<b> new Query </b>and
connect the query connection to the Synapse SQL instance. Double click the
instance name and type in the name of your data warehouse instance. </p>

<p class=TaskName style='text-indent:0in'><img width=138 height=26
id="Picture 1526240668" src="M05_L02_Lab01_files/image010.png"><br>
<br>
</p>

<p class=TaskName>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Enable Query Store for your database</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Execute
the following statement to enable query for your database. Replace the &lt;SQLpool&gt;
with your Synapse SQL name:</span><br>
<br>
</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-family:Consolas;color:blue'>ALTER DATABASE &lt;SQLpool&gt;
  SET QUERY_STORE = ON;</span></p>
  </td>
 </tr>
</table>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>&nbsp;</span></p>

<p class=TaskName>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Execute a sample Synapse SQL workload.</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Execute
the following statement to generate sample Synapse SQL workloads.</span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'><br>
<img width=367 height=299 src="M05_L02_Lab01_files/image011.png"
alt="SELECT&#13;&#10;    [Zone],&#13;&#10;    [PaymentType],&#13;&#10;    SUM(tr.[total_amount]) AS revenue&#13;&#10;FROM&#13;&#10;    [NYCTaxi].[TripsUnCompressed] tr,&#13;&#10;    [NYCTaxi].[TaxiZones],&#13;&#10;    [NYCTaxi].[PaymentType]&#13;&#10;WHERE&#13;&#10;    [LocationID] = tr.[PULocationID]&#13;&#10;    and [PaymentTypeID] = tr.[payment_type]&#13;&#10;    and [LocationID] IN (237)&#13;&#10;GROUP BY&#13;&#10;    [zone], [PaymentType]&#13;&#10;ORDER BY&#13;&#10;    revenue DESC&#13;&#10;&#13;&#10;"></span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'><img
width=367 height=358 src="M05_L02_Lab01_files/image012.png"
alt="SELECT&#13;&#10;    [Zone],&#13;&#10;    [PaymentType],&#13;&#10;    vd.[Description] as 'Vendor',&#13;&#10;    SUM(tr.[total_amount]) AS revenue&#13;&#10;FROM&#13;&#10;    [NYCTaxi].[TripsUnCompressed] tr,&#13;&#10;    [NYCTaxi].[TaxiZones],&#13;&#10;    [NYCTaxi].[PaymentType],&#13;&#10;    [NYCTaxi].[Vendor] vd&#13;&#10;WHERE&#13;&#10;    [LocationID] = tr.[PULocationID]&#13;&#10;    and [PaymentTypeID] = tr.[payment_type]&#13;&#10;    and vd.[VendorID] = tr.[VendorID]&#13;&#10;    and [LocationID] IN (237)&#13;&#10;GROUP BY&#13;&#10;    [zone], [PaymentType], vd.[Description]&#13;&#10;ORDER BY&#13;&#10;    revenue DESC&#13;&#10;"></span></p>

<p class=TaskName>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Use Query Store DMVs to gain insights on the workloads running against
your database.</p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Execute
the following statements to query “Query Store”.</span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Find
the full text of any query:</span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'><br>
<br>
</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:blue'>SELECT</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;
  q</span><span lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span
  lang=EN-AU style='font-family:Consolas;color:black'>query_id</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>,</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> t</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_sql_text</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:blue'>FROM</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:green'>sys</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_store_query q</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>JOIN</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:green'>sys</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_store_query_text t </span><span
  lang=EN-AU style='font-family:Consolas;color:blue'>ON</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> q</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_text_id </span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>=</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> t</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_text_id</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:blue'>ORDER</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:blue'>BY</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> </span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  last_execution_time </span><span lang=EN-AU style='font-family:Consolas;
  color:blue'>DESC</span></p>
  </td>
 </tr>
</table>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>&nbsp;</span></p>

<b><span style='font-size:11.0pt;line-height:115%;font-family:"Cambria",serif'><br
clear=all style='page-break-before:always'>
</span></b>

<p class=MsoNormal><span style='color:black'>&nbsp;</span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>Finding
your top executing queries:<br>
<br>
</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:blue'>SELECT</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:blue'>TOP</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> 10</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  q</span><span lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span
  lang=EN-AU style='font-family:Consolas;color:black'>query_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  [query_id]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>,</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> t</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_sql_text&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  [command]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>,</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:fuchsia'>SUM</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>(</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>rs</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>count_executions</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>)</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; [execution_count]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:blue'>FROM</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:green'>sys</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_store_query q</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>JOIN</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:green'>sys</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_store_query_text t </span><span
  lang=EN-AU style='font-family:Consolas;color:blue'>ON</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> q</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_text_id </span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>=</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> t</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_text_id</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>JOIN</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:green'>sys</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_store_plan p </span><span
  lang=EN-AU style='font-family:Consolas;color:blue'>ON</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> p</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_id </span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>=</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> q</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_id</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>JOIN</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:green'>sys</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_store_runtime_stats rs </span><span
  lang=EN-AU style='font-family:Consolas;color:blue'>ON</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> rs</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>plan_id </span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>=</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> p</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>plan_id</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:blue'>GROUP</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:blue'>BY</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  q</span><span lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span
  lang=EN-AU style='font-family:Consolas;color:black'>query_id </span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>,</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> t</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_sql_text </span><span
  lang=EN-AU style='font-family:Consolas;color:blue'>ORDER</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:blue'>BY</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> 3 </span><span lang=EN-AU
  style='font-family:Consolas;color:blue'>DESC</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>;</span></p>
  </td>
 </tr>
</table>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>&nbsp;</span></p>

<p class=TaskName style='text-indent:0in'><span style='font-weight:normal'>&nbsp;Finding
the execution times for your queries:<br>
</span>                      </p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:56.45pt;border-collapse:collapse'>
 <tr>
  <td width=516 valign=top style='width:387.0pt;border:solid gray 1.0pt;
  background:#F2F2F2;padding:.05in .05in .05in .05in'>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:blue'>SELECT</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  q</span><span lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span
  lang=EN-AU style='font-family:Consolas;color:black'>query_id [query_id]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>,</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> t</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_sql_text [command]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>,</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> rs</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>avg_duration [avg_duration]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>,</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> rs</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>min_duration [min_duration]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>,</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> rs</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:blue'>max_duration </span><span lang=EN-AU
  style='font-family:Consolas;color:black'>[max_duration]</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:blue'>FROM</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:green'>sys</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_store_query q</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>JOIN</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:green'>sys</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_store_query_text t </span><span
  lang=EN-AU style='font-family:Consolas;color:blue'>ON</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> q</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_text_id </span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>=</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> t</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_text_id</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>JOIN</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:green'>sys</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_store_plan p </span><span
  lang=EN-AU style='font-family:Consolas;color:blue'>ON</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> p</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_id </span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>=</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> q</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_id</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span><span lang=EN-AU style='font-family:Consolas;color:gray'>JOIN</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> </span><span lang=EN-AU
  style='font-family:Consolas;color:green'>sys</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>query_store_runtime_stats rs </span><span
  lang=EN-AU style='font-family:Consolas;color:blue'>ON</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> rs</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>plan_id </span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>=</span><span lang=EN-AU
  style='font-family:Consolas;color:black'> p</span><span lang=EN-AU
  style='font-family:Consolas;color:gray'>.</span><span lang=EN-AU
  style='font-family:Consolas;color:black'>plan_id</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal;text-autospace:
  none'><span lang=EN-AU style='font-family:Consolas;color:blue'>WHERE</span></p>
  <p class=MsoNormal style='margin-bottom:0in;line-height:normal'><span
  lang=EN-AU style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  rs</span><span lang=EN-AU style='font-family:Consolas;color:gray'>.</span><span
  lang=EN-AU style='font-family:Consolas;color:black'>avg_duration </span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>&gt;</span><span
  lang=EN-AU style='font-family:Consolas;color:black'> 0</span><span
  lang=EN-AU style='font-family:Consolas;color:gray'>;</span></p>
  </td>
 </tr>
</table>

<p class=CompletionMessage>&nbsp;</p>

<p class=CompletionMessage>Exercise 3 has been completed.</p>

<p class=TaskDetail style='margin-left:0in'>&nbsp;</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#D9E2F3;margin-left:0in;margin-right:.1in'>

<p class=TaskDetail style='margin-top:0in;margin-right:0in;margin-bottom:6.0pt;
margin-left:0in;background:#D9E2F3;border:none;padding:0in'><b>Important:</b>
Please pause your Synapse SQL Pool upon completing this lab. Do resume the SQL
Pool instance when you start working with the exercises. This is to prevent
from reaching the credit limit throughout the workshop.</p>

</div>

<p class=TaskDetail style='margin-left:0in'>&nbsp;</p>

</div>

</body>

</html>
